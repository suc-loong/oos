``````



# 一、拓扑层级下的操作报文

## 拓扑管理

### 1、创建网元

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>PUT</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/config/network-topology:network-topology/topology/topology-netconf/node/hclink3</p></div>

- 下发示例

```json
{
    "node": 
        {
            "node-id": "hclink3",
            "netconf-node-topology:host": "192.168.11.60",
            "netconf-node-topology:password": "dfqxyfy",
            "netconf-node-topology:username": "root",
            "netconf-node-topology:port": 830,
            "netconf-node-topology:reconnect-on-changed-schema": true,//可选配置，重连，默认重连
            "netconf-node-topology:tcp-only": false//可选配置，默认false
        }
    
}
```

### 2、查看网元配置

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>GET</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/config/network-topology:network-topology/topology/topology-netconf/node/hclink3</p></div>

- 返回示例

```json
{
    "node": [
        {
            "node-id": "hclink3",
            "netconf-node-topology:host": "192.168.11.60",
            "netconf-node-topology:password": "dfqxyfy",
            "netconf-node-topology:username": "root",
            "netconf-node-topology:port": 830
        }
    ]
}
```

### 3、查看所有网元配置

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>GET</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/config/network-topology:network-topology/topology/topology-netconf</p></div>

```json
{
    "topology": [
        {
            "topology-id": "topology-netconf",
            "node": [
                {
                    "node-id": "hclink3",
                    "netconf-node-topology:host": "192.168.11.60",
                    "netconf-node-topology:password": "dfqxyfy",
                    "netconf-node-topology:username": "root",
                    "netconf-node-topology:port": 830
                },
                {
                    "node-id": "hclink1",
                    "netconf-node-topology:reconnect-on-changed-schema": true,
                    "netconf-node-topology:host": "192.168.135.117",
                    "netconf-node-topology:password": "root",
                    "netconf-node-topology:username": "dfqxyfy",
                    "netconf-node-topology:port": 830,
                    "netconf-node-topology:tcp-only": false
                }
            ]
        }
    ]
}
```

### 4、查看网元状态

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>GET</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operational/network-topology:network-topology/topology/topology-netconf/node/hclink3</p></div>

- 返回示例

~~~json
{
    "node": [
        {
            "node-id": "hclink3",
            "netconf-node-topology:unavailable-capabilities": {
                "unavailable-capability": [
                    {
                        "capability": "(urn:ietf:params:xml:ns:netconf:notification:1.0?revision=2008-07-14)notifications",
                        "failure-reason": "unable-to-resolve"
                    }
                ]
            },
            "netconf-node-topology:available-capabilities": {
                "available-capability": [
                    {
                        "capability-origin": "device-advertised",
                        "capability": "urn:ietf:params:netconf:capability:xpath:1.0"
                    },
					...
                    {
                        "capability-origin": "device-advertised",
                        "capability": "(urn:ietf:params:xml:ns:yang:ietf-otn-types?revision=2019-01-15)ietf-otn-types"
                    }
                ]
            },
            "netconf-node-topology:host": "192.168.11.60",
            "netconf-node-topology:connection-status": "connected",
            "netconf-node-topology:port": 830
        }
    ]
}
~~~

### 5、查看所有网元状态

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>GET</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operational/network-topology:network-topology/topology/topology-netconf</p></div>

- 返回示例

~~~json
{
    "topology": [
        {
            "topology-id": "topology-netconf",
            "node": [
                {
                    "node-id": "hclink3",
                    "netconf-node-topology:unavailable-capabilities": {
                        "unavailable-capability": [
                            {
                                "capability": "(urn:ietf:params:xml:ns:netconf:notification:1.0?revision=2008-07-14)notifications",
                                "failure-reason": "unable-to-resolve"
                            }
                        ]
                    },
                    "netconf-node-topology:available-capabilities": {
                        "available-capability": [
                            {
                                "capability-origin": "device-advertised",
                                "capability": "urn:ietf:params:netconf:capability:xpath:1.0"
                            },
     						...
                            {
                                "capability-origin": "device-advertised",
                                "capability": "(urn:ietf:params:xml:ns:yang:ietf-otn-types?revision=2019-01-15)ietf-otn-types"
                            }
                        ]
                    },
                    "netconf-node-topology:host": "192.168.11.60",
                    "netconf-node-topology:connection-status": "connected",
                    "netconf-node-topology:port": 830
                },
                {
                    "node-id": "hclink1",
                    "netconf-node-topology:host": "192.168.135.117",
                    "netconf-node-topology:connection-status": "connecting",
                    "netconf-node-topology:port": 830
                }
            ]
        }
    ]
}
~~~

# 二、网元层级下的操作报文

## 告警管理

### 1、告警实时上报

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>Notifiaction</b><br/><br/>
URL <br/>
<p style="color:blue">暂空</p></div>

- 返回示例

~~~json
{
    "alarm":{
        "alarm-serial-no": 2,
        "alarm-code": "OPTI_LOS",
        "perceived-severity": "critical",
        "start-time": "2000-01-04T08:31:31+08:00",
        "object-name": "PTP=/shelf=1/slot=5/subslot=1/port=1",
        "alarm-state": "start",
        "object-type": "PTP"
    }
}
~~~

### 2、查询设备当前告警

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>GET</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operational/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-alarms:alarms</p></div>

- 返回报文

~~~json
{
    "alarms": {
        "alarm": [
            {
                "alarm-serial-no": 3,
                "alarm-code": "OPT_ABSENT",
                "perceived-severity": "major",
                "start-time": "2000-01-04T08:31:31+08:00",
                "object-name": "PTP=/shelf=1/slot=5/subslot=1/port=2",
                "alarm-state": "start",
                "object-type": "PTP"
            },
            {
                "alarm-serial-no": 2,
                "alarm-code": "OPTI_LOS",
                "perceived-severity": "critical",
                "start-time": "2000-01-04T08:31:31+08:00",
                "object-name": "PTP=/shelf=1/slot=5/subslot=1/port=1",
                "alarm-state": "start",
                "object-type": "PTP"
            }
        ]
    }
}
~~~

### 3、查询设备历史告警

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>POST</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operations/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-alarms:get-history-alarms</p></div>

- 下发示例

~~~json
{
  "input": {
    "start-time": "2000-01-03T08:31:34+08:00",
    "end-time": "2022-10-05T08:31:34+08:00"
  }
}
~~~

- 返回示例

~~~json
{
    "output": {}
}
~~~

### 4、设置告警抑制状态

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>PUT</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/config/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-alarms:alarm-mask-states/{object-name}/{alarm-code}</p></div>

- 下发示例

```json
{
  "alarm-mask-state": {
    "object-name": "PTP=/shelf=1/slot=9/subslot=1/port=1",
    "alarm-code": "RS_DEG",
    "object-type": "PTP",
    "mask-state": true//屏蔽状态：true、false
  }
}
```

### 5、**查询告警抑制的设置状态**

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>GET</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operational/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-alarms:alarm-mask-states</p></div>

- 返回示例

~~~json
{
    "alarm-mask-states": {
        "alarm-mask-state": [
            {
                "object-name": "PTP=/shelf=1/slot=9/subslot=1/port=1",
                "alarm-code": "RS_DEG",
                "mask-state": true,
                "object-type": "PTP"
            },
            {
                "object-name": "PTP=/shelf=1/slot=10/subslot=1/port=101/CTP=74",
                "alarm-code": "ODUk_PM_OCI",
                "mask-state": false,
                "object-type": "CTP"
            },
            {
                "object-name": "EQ=/shelf=1/slot=10/subslot=1/EQ=L2M2",
                "alarm-code": "BRD_MISMATCH",
                "mask-state": false,
                "object-type": "EQ"
            }
        ]
    }
}
~~~

### 6、查询指定告警抑制的设置状态

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>GET</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/config/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-alarms:alarm-mask-states/{object-name}/{alarm-code}</p></div>

- 返回示例

~~~json
{
    "alarm-mask-state": [
        {
            "object-name": "PTP=/shelf=1/slot=9/subslot=1/port=1",
            "alarm-code": "RS_DEG",
            "mask-state": true,
            "object-type": "PTP"
        }
    ]
}
~~~

## 性能管理

### 1、实时性能越限通知上报

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>Notifiaction</b><br/><br/>
URL <br/>
<p style="color:blue">暂空</p></div>

- 返回示例

~~~json
{
    "tca": {
        "tca-serial-no": 212856,
        "tca-state": "start",
        "tca-parameter": {
            "granularity": "15min",
            "pm-parameter-name": "OPT_INPUTPOW",
            "threshold-value": -40.00,
            "threshold-type": "low",
            "object-name": "PTP=/shelf=1/slot=5/subslot=1/port=1",
            "object-type": "PTP"
        },
        "start-time": "2000-01-07T08:21:08+08:00",
        "current-value": -40.00
    } 
}
~~~

2、设置性能越限阈值（公用RPC接口-标准【edit-config】）

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>POST</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operations/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/ietf-netconf:edit-config</p></div>

- 下发示例

~~~json
{
  "input": {
    "target": {
      "running": ""
    },
    //"ietf-netconf:default-operation":"merge",
    //"ietf-netconf:test-option":"test-then-set",
    //"ietf-netconf:error-option":"rollback-on-error",
    "config": {
        "acc-alarms:tca-parameters": {
			"tca-parameter":{
				"object-name": "PTP=/shelf=1/slot=9/subslot=1/port=7",
				"pm-parameter-name": "LASER_TMP",
				"granularity": "15min",//1min（以太网业务性能）、15min、24h
				"threshold-type": "high",//下发可选：high、low
				"object-type": "PTP",//ME、EQ、PTP
				"threshold-value": 40
			}
		}
    }
  }
}
~~~

### 3、查询性能越限阈值

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>GET</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operational/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-alarms:tca-parameters</p></div>

- 返回示例

~~~json
{
    "tca-parameters": {
        "tca-parameter": [
            {
                "object-name": "PTP=/shelf=1/slot=9/subslot=1/port=7",
                "pm-parameter-name": "LASER_TMP",
                "granularity": "15min",
                "threshold-type": "high",
                "object-type": "PTP",
                "threshold-value": 40
            },
            {
                "object-name": "PTP=/shelf=1/slot=3/subslot=1/port=103",
                "pm-parameter-name": "OPT_INPUTPOW",
                "granularity": "15min",
                "threshold-type": "high",
                "object-type": "PTP",
                "threshold-value": 0.00
            },
        ]
	}
}
~~~

### 4、查询当前性能

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>GET</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operational/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-performance:performances</p></div>

- 返回示例

~~~json
{
    "performances": {
        "performance": [
            {
                "object-name": "PTP=/shelf=1/slot=5/subslot=1/port=1",
                "pm-parameter-name": "txBytes",
                "granularity": "24h",
                "start-time": "2022-09-30T08:00:00+08:00",
                "digital-pm-value": 0.00,
                "object-type": "PTP"
            },
            {
                "object-name": "PTP=/shelf=1/slot=5/subslot=1/port=1",
                "pm-parameter-name": "RX_PKT_SUM",
                "granularity": "24h",
                "start-time": "2022-09-30T08:00:00+08:00",
                "digital-pm-value": 0.00,
                "object-type": "PTP"
            },
		]
	}
}
~~~

### 5、查询历史性能

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>POST</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operations/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-performance:get-history-performance-monitoring-data</p></div>

- 下发示例

~~~json
{
    "input" :{
        "start-time": "2022-09-29T08:00:00+08:00",
        "end-time": "2022-09-30T22:00:00+08:00",
        "object-name": "PTP=/shelf=1/slot=5/subslot=1/port=1",
        "granularity": "15min",//15min、24h
        "pm-parameter-name": "txBytes"//可选项、可为空，为空返回符合上述条件的全部内容，具体值见性能参数表
    }
}
~~~

- 返回示例

~~~json
{
    "output": {}
}
~~~

## 故障诊断

### 1、执行端口环回操作（公用RPC接口-标准【edit-config】）

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>POST</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operations/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/ietf-netconf:edit-config</p></div>

- 下发示例

~~~json
{
  "input": {
    "target": {
      "running": ""
    },
    "config": {
        "ptps":{//可以是PTP\CTP\FTP
            "ptp":{
                "name":"PTP=/shelf=1/slot=3/subslot=1/port=101",
                "loop-back": "terminal-loopback"//可选项如下
                //facility-loopback, terminal-loopback, mac-facility-loopback, mac-terminal-loopback, non-loopback
            }
        }
    }
  }
}
~~~

### 2、 查询端口的环回状态（公用RPC接口-标准【get】）

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>POST</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operations/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/ietf-netconf:get</p></div>

- 下发示例

~~~json
{
  "input": {
    "filter": {
        "ptps":{
            "ptp":{
                "name":"PTP=/shelf=1/slot=3/subslot=1/port=101",
                "loop-back":""
            }
        }
    }
  }
}
~~~

- 返回示例

~~~json
{
    "output": {
        "data": {
            "ptps": {
                "ptp": {
                    "name": "PTP=/shelf=1/slot=3/subslot=1/port=101",
                    "loop-back": "terminal-loopback"
                }
            }
        }
    }
}
~~~

### 3、单板复位

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>POST</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operations/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-devm:reset</p></div>

- 下发示例

~~~json
{
    "input": {
        "eq-name": "EQ=/shelf=1/slot=3/subslot=1/EQ=SXC2",
        "reset-type":"soft-reset"//选择复位类型：soft-reset、 hard-reset
    }
}
~~~

### 4、打开/关闭激光器（公用RPC接口-标准【edit-config】）

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>POST</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operations/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/ietf-netconf:edit-config</p></div>

下发示例

~~~json
{
  "input": {
    "target": {
      "running": ""
    },
    "config": {
        "ptps":{
            "ptp":{
                "name":"PTP=/shelf=1/slot=5/subslot=1/port=1",
                "laser-status": "laser-on"//可选：laser-on、laser-off，默认为laser-on
                //注意：对于"laser-status": "no-optical-module"不可以打开/关闭激光器
            }
        }
    }
  }
}
~~~

### 5、查询激光器工作状态（公用RPC接口-标准【get】）

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>POST</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operations/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/ietf-netconf:get</p></div>

- 下发示例

~~~json
{
  "input": {
    "filter": {
        "ptps":{
            "ptp":{
                "name":"PTP=/shelf=1/slot=5/subslot=1/port=1",
                "laser-status":""
            }
        }
    }
  }
}
~~~

- 返回示例

~~~json
{
    "output": {
        "data": {
            "ptps": {
                "ptp": {
                    "name": "PTP=/shelf=1/slot=5/subslot=1/port=1",
                    "laser-status": "laser-on"
                }
            }
        }
    }
}
~~~

## 业务发放管理

### 1、创建 ETH connection

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>POST</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operations/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-eth:create-eth-connection</p></div>

#### ①EPL无保护

- 下发示例

~~~json
{
  "input": {
    "service-type": "EPL",
    "layer-protocol-name": "ETH",
    "requested-capacity": {
      "total-size": 2000,
      "cir": 999,
      "pir": 1001,
      "cbs": 1000,
      "pbs": 1002
    },
    "eth-uni": {
      "uni-ptp-name": "PTP=/shelf=1/slot=5/subslot=1/port=8"
    },
    "primary-nni-1": {
      "nni-ptp-name": "PTP=/shelf=1/slot=6/subslot=1/port=102",
      "nni-ts-detail": "8-80"
    }
  }
}
~~~

- 返回示例

~~~json
{
    "output": {
        "create-component": {
            "ftp-name": [
                "FTP=/shelf=1/slot=5/subslot=1/port=202"
            ],
            "ctp-name": [
                "PTP=/shelf=1/slot=6/subslot=1/port=102/CTP=1"
            ]
        },
        "connection": {
            "layer-protocol-name": "acc-eth:ETH",
            "state-pac": {
                "admin-state": "enabled",
                "operational-state": "up"
            },
            "name": "CONNECTION=ETH2",
            "ctp": [
                "FTP=/shelf=1/slot=5/subslot=1/port=202/CTP=4",
                "PTP=/shelf=1/slot=5/subslot=1/port=8/CTP=3"
            ],
            "requested-capacity": {
                "pbs": 1002,
                "pir": 1001,
                "cbs": 1000,
                "cir": 999
            },
            "service-type": "EPL"
        }
    }
}
~~~

#### ②EPL带保护

- 下发示例

~~~json
{
  "input": {
    "service-type": "EPL",
    "layer-protocol-name": "ETH",
    "requested-capacity": {
      "total-size": 2000,
      "cir": 999,
      "pir": 1001,
      "cbs": 1002,
      "pbs": 1003
    },
    "eth-uni": {
      "uni-ptp-name": "PTP=/shelf=1/slot=5/subslot=1/port=7"
    },
    "primary-nni-1": {
      "nni-ptp-name": "PTP=/shelf=1/slot=6/subslot=1/port=102",
      "nni-ts-detail": "8-80"
    },
	"secondary-nni-1": {
      "nni-ptp-name": "PTP=/shelf=1/slot=6/subslot=1/port=102",
      "nni-ts-detail": "8-40"
    }
  }
}
~~~

- 返回示例

~~~json
{
    "output": {
        "create-component": {
            "ftp-name": [
                "FTP=/shelf=1/slot=5/subslot=1/port=203"
            ],
            "ctp-name": [
                "PTP=/shelf=1/slot=6/subslot=1/port=102/CTP=1",
                "PTP=/shelf=1/slot=6/subslot=1/port=102/CTP=2"
            ]
        },
        "connection": {
            "layer-protocol-name": "acc-eth:ETH",
            "state-pac": {
                "admin-state": "enabled",
                "operational-state": "up"
            },
            "name": "CONNECTION=ETH3",
            "ctp": [
                "FTP=/shelf=1/slot=5/subslot=1/port=203/CTP=6",
                "PTP=/shelf=1/slot=5/subslot=1/port=7/CTP=5"
            ],
            "requested-capacity": {
                "pbs": 1003,
                "pir": 1001,
                "cbs": 1002,
                "cir": 999
            },
            "service-type": "EPL"
        }
    }
}
~~~



### 2、创建 ETH-ETH connection



### 3、创建 SDH connection

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>POST</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operations/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-sdh:create-sdh-connection</p></div>

#### ①无保护

- 下发示例

~~~json
{
  "input": {
    "connection-name": "Optional-TEST",//连接名称，即使指定也另起名
    "service-type": "SDH",//EPL、EVPL、SDH、ODU
    "layer-protocol-name": "SDH",
    "requested-capacity": {
      "total-size": 4006,
      "cir": 1000,
      "pir": 1001,
      "cbs": 1002,
      "pbs": 1003
    },
    "sdh-uni": {
      "uni-ptp-name": "PTP=/shelf=1/slot=9/subslot=1/port=5",
      "vc-type": "VC4",//交换颗粒 VC12, VC3, VC4
      "ctp-mapping-path": "1-1-1-1"//A-CTP映射路径
    },
    "primary-nni-1": {//secondary
      "vc-type": "VC4",
      "nni-ptp-name": "PTP=/shelf=1/slot=6/subslot=1/port=107",
      "nni-ts-detail": "2-40",
      "adaptation-type": "ODUj21",//CBR_AMP, CBR_BMP, GFP-T, GFP-F, CBRx, TTT+GMP, CBRX_GMP, ODUij, ODUj21, ODUk
      "client-signal-type": "acc-otn:ODU0",//STM1, STM4, STM16, STM64, STM256
//"switch-capability": "acc-otn:ODU1",//VC3 VC4 VC12
      "sdh-spec": {
        "sdh-type": "STM4",//STM1, STM4, STM16, STM64, STM256
        "ctp-mapping-path": "1-1-1-1"
      }
    }
  }
}
~~~

- 返回示例

~~~json
{
    "output": {
        "create-component": {
            "ftp-name": [
                "FTP=/shelf=1/slot=9/subslot=1/port=201"
            ],
            "ctp-name": [
                "PTP=/shelf=1/slot=6/subslot=1/port=107/CTP=2"
            ]
        },
        "connection": {
            "layer-protocol-name": "acc-sdh:SDH",
            "name": "CONNECTION=SDH12",
            "requested-capacity": {
                "total-size": 4006
            },
            "ctp": [
                "FTP=/shelf=1/slot=9/subslot=1/port=201/CTP=533",
                "PTP=/shelf=1/slot=9/subslot=1/port=5/CTP=531"
            ],
            "state-pac": {
                "admin-state": "enabled",
                "operational-state": "up"
            },
            "service-type": "SDH"
        }
    }
}
~~~

#### ②带保护

- 下发示例

~~~json
{
  "input": {
    "connection-name": "Optional-TEST",//连接名称，即使指定也另起名
    "service-type": "SDH",//EPL、EVPL、SDH、ODU
    "layer-protocol-name": "SDH",
    "requested-capacity": {
      "total-size": 4000,
      "cir": 1000,
      "pir": 1001,
      "cbs": 1002,
      "pbs": 1003
    },
    "sdh-uni": {
      "uni-ptp-name": "PTP=/shelf=1/slot=9/subslot=1/port=5",
      "vc-type": "VC4",//交换颗粒 VC12, VC3, VC4
      "ctp-mapping-path": "1-1-1-1"//A-CTP映射路径
    },
    "primary-nni-1": {
      "vc-type": "VC4",
      "nni-ptp-name": "PTP=/shelf=1/slot=6/subslot=1/port=107",
      "nni-ts-detail": "2-40",
      "adaptation-type": "ODUj21",//CBR_AMP, CBR_BMP, GFP-T, GFP-F, CBRx, TTT+GMP, CBRX_GMP, ODUij, ODUj21, ODUk
      "client-signal-type": "acc-otn:ODU0",//STM1, STM4, STM16, STM64, STM256
        //"switch-capability": "ietf-otn-types:ODU2",//VC3 VC4 VC12
      "sdh-spec": {
        "sdh-type": "STM1",//STM1, STM4, STM16, STM64, STM256
        "ctp-mapping-path": "1-1-1-1"
      }
    },
    "secondary-nni-1": {
      "vc-type": "VC4",
      "nni-ptp-name": "PTP=/shelf=1/slot=6/subslot=1/port=107",
      "nni-ts-detail": "2-80",
      "adaptation-type": "ODUj21",//CBR_AMP, CBR_BMP, GFP-T, GFP-F, CBRx, TTT+GMP, CBRX_GMP, ODUij, ODUj21, ODUk
      "client-signal-type": "acc-otn:ODU0",//STM1, STM4, STM16, STM64, STM256
        //"switch-capability": "ietf-otn-types:ODU1",//VC3 VC4 VC12
      "sdh-spec": {
        "sdh-type": "STM1",//STM1, STM4, STM16, STM64, STM256
        "ctp-mapping-path": "1-1-1-1"
      }
    }
  }
}
~~~

- 返回示例

~~~json
{
    "output": {
        "create-component": {
            "ftp-name": [
                "FTP=/shelf=1/slot=9/subslot=1/port=201",
                "FTP=/shelf=1/slot=9/subslot=1/port=202"
            ],
            "ctp-name": [
                "PTP=/shelf=1/slot=6/subslot=1/port=107/CTP=2",
                "PTP=/shelf=1/slot=6/subslot=1/port=107/CTP=1"
            ]
        },
        "connection": {
            "layer-protocol-name": "acc-sdh:SDH",
            "name": "CONNECTION=SDH9",
            "requested-capacity": {
                "total-size": 4000
            },
            "ctp": [
                "FTP=/shelf=1/slot=9/subslot=1/port=202/CTP=533",
                "FTP=/shelf=1/slot=9/subslot=1/port=201/CTP=531",
                "PTP=/shelf=1/slot=9/subslot=1/port=5/CTP=529"
            ],
            "state-pac": {
                "admin-state": "enabled",
                "operational-state": "up"
            },
            "service-type": "SDH"
        }
    }
}
~~~

- 产生的保护

~~~json
{
    "pgs": {
        "pg": [
            {
                "pg-id": 3,
                "switch-reason": "no-switch",
                "primary-port": "FTP=/shelf=1/slot=9/subslot=1/port=201/CTP=509",
                "protection-direction": "to-primary",
                "protection-type": "vc-sncp",
                "secondary-port": "FTP=/shelf=1/slot=9/subslot=1/port=202/CTP=510",
                "hold-off": 0,
                "wait-to-restore-time": 0,
                "selected-port": "FTP=/shelf=1/slot=9/subslot=1/port=201/CTP=509",
                "switch-type": "uni-switch"
            }
        ]
    }
}
~~~

### 4、创建 ODU connection

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>POST</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operations/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-otn:create-odu-connection</p></div>

#### ①无保护

- 下发示例

~~~json
{
  "input": {
    //"connection-name": "Optional.empty",
    "service-type": "ODU",
    "layer-protocol-name": "ODU",
    "requested-capacity": {
      "total-size": 4007,
      "cir": 1000,
      "pir": 1001,
      "cbs": 1002,
      "pbs": 1003
    },
    "client-side-uni": {
      "nni-ptp-name": "PTP=/shelf=1/slot=7/subslot=1/port=2",
      "nni-ts-detail": "8-80",
      "adaptation-type": "ODUk",
      "client-signal-type": "acc-otn:ODU0",
      "switch-capability": "ietf-otn-types:ODU2"
    },
    "primary-nni-1": {
      "nni-ptp-name": "PTP=/shelf=1/slot=6/subslot=1/port=108",
      "nni-ts-detail": "8-80",
      "adaptation-type": "ODUj21",
      "client-signal-type": "acc-otn:ODU0"
      //"switch-capability": "ietf-otn-types:ODU0"
    }
  }
}
~~~

- 返回示例

~~~json
{
    "output": {
        "connection": {
            "service-type": "ODU",
            "ctp": [
                "PTP=/shelf=1/slot=6/subslot=1/port=108/CTP=1",
                "PTP=/shelf=1/slot=6/subslot=1/port=101/CTP=1"
            ],
            "requested-capacity": {
                "total-size": 4007
            },
            "state-pac": {
                "operational-state": "up",
                "admin-state": "enabled"
            },
            "name": "CONNECTION=ODU1",
            "layer-protocol-name": "acc-otn:ODU"
        }
    }
}
~~~

#### ②带保护

- 下发示例

~~~json
{
  "input": {
    //"connection-name": "Optional.empty",
    "service-type": "ODU",
    "layer-protocol-name": "ODU",
    "requested-capacity": {
      "total-size": 4007,
      "cir": 1000,
      "pir": 1001,
      "cbs": 1002,
      "pbs": 1003
    },
    "client-side-uni": {
      "nni-ptp-name": "PTP=/shelf=1/slot=7/subslot=1/port=2",
      "nni-ts-detail": "8-80",
      "adaptation-type": "ODUk",
      "client-signal-type": "acc-otn:ODU1"
      //"switch-capability": "ietf-otn-types:ODU2"
    },
    "primary-nni-1": {
      "nni-ptp-name": "PTP=/shelf=1/slot=6/subslot=1/port=108",
      "nni-ts-detail": "8-80",
      "adaptation-type": "ODUj21",
      "client-signal-type": "ODU0"
     // "switch-capability": "ietf-otn-types:ODU2"
    },
    "secondary-nni-1": {
       "nni-ptp-name": "PTP=/shelf=1/slot=6/subslot=1/port=108",
      "nni-ts-detail": "8-40",
      "adaptation-type": "ODUj21",
      "client-signal-type": "acc-otn:ODU0"
     // "switch-capability": "ietf-otn-types:ODU0"
    }
  }
}
~~~

- 返回示例

~~~json
{
    "output": {
        "connection": {
            "service-type": "ODU",
            "ctp": [
                "PTP=/shelf=1/slot=6/subslot=1/port=101/CTP=1",
                "PTP=/shelf=1/slot=6/subslot=1/port=108/CTP=2",
                "PTP=/shelf=1/slot=6/subslot=1/port=108/CTP=1"
            ],
            "requested-capacity": {
                "total-size": 4007
            },
            "state-pac": {
                "operational-state": "up",
                "admin-state": "enabled"
            },
            "name": "CONNECTION=ODU5",
            "layer-protocol-name": "acc-otn:ODU"
        }
    }
}
~~~

### 5、创建 EoS connection

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>POST</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operations/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-eos:create-eos-connection</p></div>

#### ①EPL带保护

- 下发示例

~~~json
{
  "input": {
    //"connection-name": "Optional.empty",
    "service-type": "EPL",
    "layer-protocol-name": "acc-eth:ETH",
    "requested-capacity": {
      "total-size": 4007,
      "cir": 1000,
      "pir": 1001,
      "cbs": 1002,
      "pbs": 1003
    },
    "eth-uni": {
      "uni-ptp-name": "PTP=/shelf=1/slot=7/subslot=1/port=2"
      //"client-vlan-spec": {
      //  "vlan-id": [
      //    "Optional.empty"
      //  ],
      //  "vlan-priority": "Optional.empty",
      //  "access-action": "Optional.empty",
      //  "vlan-type": "Optional.empty"
      //},
      //"uni-vlan-spec": {
      //  "vlan-id": [
      //    "Optional.empty"
      //  ],
      //  "vlan-priority": "Optional.empty",
      //  "access-action": "Optional.empty",
      //  "vlan-type": "Optional.empty"
      //},
      //"ftp-vlan-spec": {
      //  "vlan-id": [
      //    "Optional.empty"
      //  ],
      //  "vlan-priority": 0,
      //  "access-action": "Optional.empty",
      //  "vlan-type": "Optional.empty"
      //}
    },
    "primary-nni": {
      "nni-ptp-name": "PTP=/shelf=1/slot=6/subslot=1/port=108",
      "nni-ts-detail": "8-40",
      "adaptation-type": "ODUj21",
      "client-signal-type": "acc-otn:ODU0",
      "switch-capability": "ietf-otn-types:ODU2"
    },
    "secondary-nni": {
     "nni-ptp-name": "PTP=/shelf=1/slot=6/subslot=1/port=107",
      "nni-ts-detail": "8-40",
      "adaptation-type": "ODUj21",
      "client-signal-type": "acc-otn:ODU0",
      "switch-capability": "ietf-otn-types:ODU2"
    },
    "eos-pac": {
      "sdh-signal-type": "STM16",
      "vc-type": "VC4",
      "mapping-path": [
        1,2
      ],
      //"sdh-signal-type-protect": "Optional.empty",
      //"mapping-path-protect": [
      //  "Optional.empty"
      //],
      "lcas": false,//默认false
      "hold-off": 1,//默认0
      "wtr": 300,//默认300
      "tsd": false//默认false
    }
  }
}
~~~

- 返回示例

~~~json
{
    "output": {
        "create-component": {
            "ftp-name": [
                "FTP=/shelf=1/slot=6/subslot=1/port=201",
                "FTP=/shelf=1/slot=7/subslot=1/port=201"
            ],
            "ctp-name": [
                "PTP=/shelf=1/slot=6/subslot=1/port=107/CTP=2",
                "PTP=/shelf=1/slot=6/subslot=1/port=108/CTP=2"
            ],
            "vc-connection-name": [
                "CONNECTION=SDH11",
                "CONNECTION=SDH10"
            ]
        },
        "connection": {
            "layer-protocol-name": "acc-eth:ETH",
            "service-type": "EPL",
            "ctp": [
                "FTP=/shelf=1/slot=7/subslot=1/port=201/CTP=7",
                "FTP=/shelf=1/slot=5/subslot=1/port=201/CTP=1"
            ],
            "requested-capacity": {
                "pbs": 1003,
                "pir": 1001,
                "cbs": 1002,
                "cir": 1000
            },
            "state-pac": {
                "admin-state": "enabled",
                "operational-state": "up"
            },
            "name": "CONNECTION=ETH4"
        }
    }
}
~~~



### 6、删除 connection

#### ①删除指定名称的连接

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>DELETE</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/config/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-connection:connections/connection/{name}</p></div>

#### ②删除全部连接

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>DELETE</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/config/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-connection:connections</p></div>

### 7、查询 connection 的详细信息

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>GET</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operational/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-connection:connections</p></div>

返回示例

~~~json
{
    "connections": {
        "connection": [
            {
                "name": "CONNECTION=SDH1",
                "service-type": "SDH",
                "state-pac": {
                    "admin-state": "enabled",
                    "operational-state": "up"
                },
                "layer-protocol-name": "acc-sdh:SDH",
                "ctp": [
                    "PTP=/shelf=1/slot=9/port=3/CTP=502",
                    "FTP=/shelf=1/slot=10/port=201/CTP=501"
                ],
                "requested-capacity": {
                    "total-size": 2
                }
            },
            {
                "name": "CONNECTION=ODU1",
                "service-type": "ODU",
                "state-pac": {
                    "admin-state": "enabled",
                    "operational-state": "up"
                },
                "layer-protocol-name": "acc-otn:ODU",
                "ctp": [
                    "PTP=/shelf=1/slot=6/subslot=1/port=108/CTP=1",
                    "PTP=/shelf=1/slot=6/subslot=1/port=101/CTP=1"
                ],
                "requested-capacity": {
                    "total-size": 1250
                }
            },
            {
                "name": "CONNECTION=ETH1",
                "service-type": "EPL",
                "state-pac": {
                    "admin-state": "enabled",
                    "operational-state": "up"
                },
                "layer-protocol-name": "acc-eth:ETH",
                "ctp": [
                    "FTP=/shelf=1/slot=5/subslot=1/port=201/CTP=1",
                    "PTP=/shelf=1/slot=5/subslot=1/port=1/CTP=101"
                ],
                "requested-capacity": {
                    "cbs": 130048,
                    "cir": 1000,
                    "pbs": 130048,
                    "pir": 1000
                }
            }
        ]
    }
}
~~~



### 8、修改 ETH connection 的带宽



### 9、修改 ODU connection 的带宽



### 10、修改 VCG connection 的带宽



## 保护组管理



### 1、查询保护组信息

#### ①查询全部信息

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>GET</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operational/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-protection-group:pgs</p></div>

- 返回示例

~~~json
{
    "pgs": {
        "pg": [
            {
                "pg-id": 1,
                "switch-reason": "no-switch",
                "primary-port": "PTP=/shelf=1/slot=3/subslot=1/port=102",
                "protection-direction": "to-primary",
                "secondary-port": "PTP=/shelf=1/slot=3/subslot=1/port=103",
                "hold-off": 30,
                "wait-to-restore-time": 60,
                "selected-port": "PTP=/shelf=1/slot=3/subslot=1/port=102",
                "switch-type": "uni-switch"
            },
            {
                "pg-id": 2,
                "switch-reason": "no-switch",
                "primary-port": "PTP=/shelf=1/slot=4/subslot=1/port=102",
                "protection-direction": "to-primary",
                "secondary-port": "PTP=/shelf=1/slot=4/subslot=1/port=103",
                "hold-off": 0,
                "wait-to-restore-time": 0,
                "selected-port": "PTP=/shelf=1/slot=4/subslot=1/port=102",
                "switch-type": "uni-switch"
            }
        ]
    }
}
~~~

#### ②查询指定保护组Id信息

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>GET</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operational/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-protection-group:pgs/pg/{pg-id}</p></div>

- 返回示例

~~~json
{
    "pg": [
        {
            "pg-id": 2,
            "switch-reason": "no-switch",
            "primary-port": "PTP=/shelf=1/slot=4/subslot=1/port=102",
            "protection-direction": "to-primary",
            "secondary-port": "PTP=/shelf=1/slot=4/subslot=1/port=103",
            "hold-off": 0,
            "wait-to-restore-time": 0,
            "selected-port": "PTP=/shelf=1/slot=4/subslot=1/port=102",
            "switch-type": "uni-switch"
        }
    ]
}
~~~

### 2、创建保护组

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>PUT</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/config/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-protection-group:pgs/pg/{pg-id}</p></div>

- 下发示例


~~~json
{
    "pg":{
        "pg-id": 3,
        "primary-port": "PTP=/shelf=1/slot=5/subslot=1/port=6",
        "secondary-port": "PTP=/shelf=1/slot=5/subslot=1/port=105",
        "wait-to-restore-time": 300,//默认300
        "hold-off": 30,
        "reversion-mode": "return",//可选：return、non-return
        "switch-type": "uni-switch"//可选：uni-switch、bi-switch，默认uni-switch
    }
}
~~~

### 3、删除保护组

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>DELETE</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/config/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-protection-group:pgs/pg/{pg-id}</p></div>

### 4、保护组倒换操作

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>POST</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operations/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-protection-group:perform-protection-command</p></div>

- 下发示例

~~~json
{
    "input":{
        "pg-id":1,
        "protection-command":"manual-switch",//no-switch、sf-switch、sd-switch、manual-switch、force-switch、cleared、wait-to-restore、lockout
        "protection-direction":"to-primary"//to-primary、to-secondary
    }
}
~~~

### 5、SD 触发保护倒换设置

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>POST</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operations/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-protection-group:switch-sd-trigger-enable</p></div>

- 下发示例

~~~json
{
    "input":{
        "pg-id":1,
        "sd-trigger":true
    }
}
~~~



### 6、SD 触发保护倒换设置状态查询

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>POST</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operations/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-protection-group:get-switch-sd-trigger-status</p></div>

- 下发示例

~~~json
{
    "input":{
        "pg-id":1
    }
}
~~~

- 返回示例

~~~json
{
    "output": {
        "sd-trigger-status": false
    }
}
~~~

### 7、查询LAG保护组

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>GET</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/operational/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-protection-group:lagPGs</p></div>

### 8、创建LAG保护组

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>PUT</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/config/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-protection-group:lagPGs/lagPG/{lag-id}</p></div>

### 9、删除LAG保护组

<div style="padding:8px 16px;background-color:#ecf8ff;border-radius:4px;border-left:5px solid #50bfff;margin:20px 0">
<b>DELETE</b><br/><br/>
URL <br/>
<p style="color:blue">http://127.0.0.1:8181/restconf/config/network-topology:network-topology/topology/topology-netconf/node/hclink3/yang-ext:mount/acc-protection-group:lagPGs/lagPG/{lag-id}</p></div>

